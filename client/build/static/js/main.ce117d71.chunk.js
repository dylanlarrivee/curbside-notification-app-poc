(this["webpackJsonpcurbside-pickup-react-app"]=this["webpackJsonpcurbside-pickup-react-app"]||[]).push([[0],{16:function(e,t,a){e.exports=a.p+"static/media/ShawScott_Logo_Gradient.44fdb4aa.png"},39:function(e,t,a){e.exports=a(95)},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(34),l=a.n(s),o=(a(44),a(45),a(46),a(47),a(48),a(49),a(50),a(38)),c=a(1),i=a(12),m=a(6),d=a(14),u=a(3),p=a.n(u),E=a(9),g=a(10),f=a.n(g),h=function(e){return r.a.createElement("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(f.a,{type:"ThreeDots",color:e.color,height:"100",width:"100"}))},b=function(e){function t(t){var a=e.p.orderId,n=t.target.parentNode.parentNode.id;if(window.confirm("Confirm that order # "+a+" has picked up their order and can be removed.")){var r={id:n,clerkName:e.username};e.setLoading(!0),p()({url:"/api/order-complete/",method:"POST",data:r}).then((function(){var t=e.currentCustomerData.findIndex((function(e){return e._id===n})),a=e.currentCustomerData;a.splice(t,1),e.setCurrentCustomerData(Object(E.a)(a)),e.setLoading(!1)})).catch((function(){console.log("Internal server error"),e.setLoading(!1),window.confirm("Internal system error. Record could not be updated to completed. Please try again.")}))}}var a="table-item table-item-0"+e.columnAmount;return"jobStatus"!==e.value?r.a.createElement("div",{key:"table_"+e.value,className:"table-item table-item-0"+e.index},r.a.createElement("p",null,e.p[e.value])):"submitted"===e.p.orderStatus?r.a.createElement("div",{key:"table_"+e.value,className:a},r.a.createElement("button",{id:e.p._id,onClick:function(t){var a=e.p.orderId,n=t.target.parentNode.parentNode.id;if(window.confirm("Confirm that you are ready to process order # "+a)){var r={id:t.target.parentNode.parentNode.id,clerkName:e.fullName,username:e.username};e.setLoading(!0),p()({url:"/api/order-processing",method:"POST",data:r}).then((function(){var t=e.currentCustomerData.findIndex((function(e){return e._id===n})),a=e.currentCustomerData;a[t].usernameProcessing=e.username,a[t].orderStatus="processing",e.setCurrentCustomerData(Object(E.a)(a)),e.setLoading(!1)})).catch((function(){console.log("Internal server error"),e.setLoading(!1),window.confirm("Internal system error. Record could not be deleted. Please try again.")}))}},className:"btn-start"},"Start"),r.a.createElement("button",{id:e.p._id,onClick:t,className:"btn-complete"},"Complete")):"processing"===e.p.orderStatus?e.username===e.p.usernameProcessing?r.a.createElement("div",{key:"table_"+e.value,className:a},r.a.createElement("button",{onClick:function(t){var a=e.p.orderId,n=t.target.parentNode.parentNode.id;if(window.confirm("Confirm that you want to stop processing order # "+a)){var r={id:t.target.parentNode.parentNode.id,clerkName:e.fullName,username:e.username};e.setLoading(!0),p()({url:"/api/stop-order-processing",method:"POST",data:r}).then((function(){var t=e.currentCustomerData.findIndex((function(e){return e._id===n})),a=e.currentCustomerData;a[t].orderStatus="submitted",e.setCurrentCustomerData(Object(E.a)(a)),e.setLoading(!1)})).catch((function(){console.log("Internal server error"),e.setLoading(!1),window.confirm("Internal system error. Record could not be deleted. Please try again.")}))}},className:"btn-stop"},"Stop"),r.a.createElement("button",{id:e.p._id,onClick:t,className:"btn-complete"},"Complete"),r.a.createElement("p",{className:"job-status-comment"},"You are working on this job.")):r.a.createElement("div",{key:"table_"+e.value,className:a},r.a.createElement("button",{className:"btn-started"},"Started"),r.a.createElement("button",{id:e.p._id,onClick:t,className:"btn-complete"},"Complete"),r.a.createElement("p",{className:"job-status-comment"},e.p.usernameProcessing," is working on this job.")):void 0},v=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],d=i[1],u=Object(n.useState)(!1),g=Object(c.a)(u,2),f=g[0],v=g[1],w=Object(n.useState)([]),N=Object(c.a)(w,2),y=N[0],O=N[1],S=Object(n.useState)({}),j=Object(c.a)(S,2),I=j[0],k=j[1],C={count:0},P=e.fullName,D=e.storeId,U=e.companyId,T=e.username;Object(n.useEffect)((function(){if(U&&D){var e={companyId:U};if(p()({url:"/api/table-columns",method:"POST",data:e}).then((function(e){O(e.data.data[0].tableColumnIds),k(e.data.data[0].tableColumnCopy)})).catch((function(e){console.log("Internal server error:",e)})),"127.0.0.1"===window.location.hostname){var t=function(){var e={storeId:D,companyId:U};p()({url:"http://localhost:3000/api/current-orders",method:"POST",data:e}).then((function(e){if("/current-orders"===window.location.pathname){var t=e.data.data;t.sort((function(e,t){return e=new Date(e.orderSubmittedDate),(t=new Date(t.orderSubmittedDate))>e?-1:t<e?1:0})),l(Object(E.a)(t)),v(!0),C.count<t.length&&new Notification("There are customers in your queue");var n=t.length;C.count=n}else clearInterval(a)})).catch((function(e){console.log("getOrdersError: Internal server error:",e)}))};t();var a=setInterval(t,1e3)}else{var n=function(){var e="https://"+window.location.hostname+"/api/current-orders",t={storeId:D,companyId:U};p()({url:e,method:"POST",data:t}).then((function(e){if("/current-orders"===window.location.pathname){var t=e.data.data;t.sort((function(e,t){return e=new Date(e.orderSubmittedDate),(t=new Date(t.orderSubmittedDate))>e?-1:t<e?1:0})),l(Object(E.a)(t)),v(!0),C.count<t.length&&new Notification("There are customers in your queue");var a=t.length;C.count=a}else clearInterval(r)})).catch((function(e){console.log("getOrdersError: Internal server error:",e)}))};n();var r=setInterval(n,1e3)}}}),[U,D]);return r.a.createElement("div",null,r.a.createElement("main",null,r.a.createElement("h1",null,"Curbside Pickup Store #",e.storeId),r.a.createElement("h2",null,"Clerk Name: ",r.a.createElement("span",{className:"clerk-color"},P)),r.a.createElement("h2",null,"Username: ",r.a.createElement("span",{className:"clerk-color"},T)),r.a.createElement("p",null,"Real time updates as customers are outside your\xa0store."),r.a.createElement("br",null),r.a.createElement("div",null,0===s.length&&f?r.a.createElement("div",{className:"no-customer-que"},"No customers currently in the que"):0!==s.length||f?m?r.a.createElement("div",null,r.a.createElement(h,{color:"#dddddd"})):r.a.createElement("div",null,s.map((function(e){return r.a.createElement("div",{id:e._id,key:e._id,className:"table-container col-5"},y.map((function(e,t){return r.a.createElement("div",{key:"header_"+t+1,className:"table-item-header header-0"+t},r.a.createElement("p",null,I[e]))})),y.map((function(t,a){return r.a.createElement(b,{key:t,p:e,setLoading:d,columnAmount:a,value:t,index:a,fullName:P,username:T,currentCustomerData:s,setCurrentCustomerData:l})})))}))):r.a.createElement("div",null,r.a.createElement(h,{color:"#dddddd"})))))},w=function(e){return r.a.createElement("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(f.a,{type:"ThreeDots",color:e.color,height:"100",width:"100"}))},N=function(e){return console.log("xcompletedCustomerDat:",e.completedCustomerData),"jobStatus"===e.value?r.a.createElement("div",{className:"table-item table-item-05"},r.a.createElement("button",{id:e.p._id,onClick:function(t){var a=e.p.orderId,n=t.target.id;if(window.confirm("Confirm that order # "+a+" should be added back to the current pickups queue?")){var r={mongoId:n,orderId:a};e.setLoading(!0),p()({url:"/api/order-completed-undo/",method:"POST",data:r}).then((function(){console.log("Customer has been added back to the current pickups queue");var t=e.completedCustomerData.findIndex((function(e){return e._id==n})),a=e.completedCustomerData;a.splice(t,1),e.setCompletedCustomerData(Object(E.a)(a))})).catch((function(t){console.log("Internal server error:",t),setTimeout((function(){e.setLoading(!1)}),3e3),window.confirm("Internal system error. Record could not be added back. Please try again.")}))}},className:"btn-pickedup"},"Undo Pickup"),r.a.createElement("p",{className:"job-status-comment"},"Job completed by ",e.p.clerkNameCompleted)):r.a.createElement("div",{key:"table_"+e.value,className:"table-item table-item-0"+e.index},r.a.createElement("p",null,e.p[e.value]))},y=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],d=i[1],u=Object(n.useState)(!1),g=Object(c.a)(u,2),f=g[0],h=g[1],b=Object(n.useState)(!1),v=Object(c.a)(b,2),y=v[0],O=v[1],S=Object(n.useState)(""),j=Object(c.a)(S,2),I=j[0],k=j[1],C=Object(n.useState)({}),P=Object(c.a)(C,2),D=P[0],U=P[1],T=(e.fullName,e.storeId),x=e.companyId;e.username;Object(n.useEffect)((function(){if(x&&T){var e={companyId:x};if(p()({url:"/api/table-columns",method:"POST",data:e}).then((function(e){k(e.data.data[0].tableColumnIds),U(e.data.data[0].tableColumnCopy),O(!0)})).catch((function(){console.log("Internal server error")})),"127.0.0.1"===window.location.hostname){var t=function(){var e={storeId:T,companyId:x};p()({url:"http://localhost:3000/api/completed-orders",method:"POST",data:e}).then((function(e){if("/completed-orders"===window.location.pathname){var t=e.data.data;t.sort((function(e,t){return(e=new Date(e.orderCompletedDate))>(t=new Date(t.orderCompletedDate))?-1:e<t?1:0})),l(Object(E.a)(t)),h(!0)}else clearInterval(a)})).catch((function(e){console.log("getOrdersError: Internal server error:",e)}))};t();var a=setInterval(t,3e3)}else{var n=function(){var e="https://"+window.location.hostname+"/api/completed-orders",t={storeId:T,companyId:x};p()({url:e,method:"POST",data:t}).then((function(e){if("/completed-orders"===window.location.pathname){var t=e.data.data;t.sort((function(e,t){return(e=new Date(e.orderCompletedDate))>(t=new Date(t.orderCompletedDate))?-1:e<t?1:0})),l(Object(E.a)(t)),h(!0)}else clearInterval(r)})).catch((function(e){console.log("getOrdersError: Internal server error:",e)}))};n();var r=setInterval(n,3e3)}}}),[x,T]);return r.a.createElement("div",null,r.a.createElement("main",null,r.a.createElement("h1",null,"Curbside Pickup Store #",e.storeId),r.a.createElement("h2",null,"Clerk Name: ",r.a.createElement("span",{className:"clerk-color"},e.fullName)),r.a.createElement("h2",null,"Username: ",r.a.createElement("span",{className:"clerk-color"},e.username)),r.a.createElement("p",null,"These are all the customers that have completed their order pickup in the past 12 hours."),r.a.createElement("p",null,"Click to add them back to the current pickups queue if needed."),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",null,0===s.length&&f?r.a.createElement("div",{className:"no-customer-que"},"No customers currently in the que"):0!==s.length||f?m||!y?r.a.createElement("div",null,r.a.createElement(w,{color:"#dddddd"})):r.a.createElement("div",null,s.map((function(e){return r.a.createElement("div",{id:e._id,key:e._id,className:"table-container col-5"},I.map((function(e,t){return r.a.createElement("div",{key:"header_"+t+1,className:"table-item-header header-0"+t},r.a.createElement("p",null,D[e]))})),I.map((function(t,a){return r.a.createElement(N,{key:t,p:e,setLoading:d,columnAmount:a,value:t,index:a,completedCustomerData:s,setCompletedCustomerData:l})})))}))):r.a.createElement("div",null,r.a.createElement(w,{color:"#dddddd"}))))))},O=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],d=i[1],u=e.storeId,E=e.companyId;Object(n.useEffect)((function(){var e={storeId:u,companyId:E};u&&E&&p()({url:"/api/get-store-status",method:"POST",data:e}).then((function(e){console.log("data.data.storeStatusPayload",JSON.stringify(e.data.storeStatusPayload)),g(e.data.storeStatusPayload)})).catch((function(e){console.log("getStoreStatus: Internal server error")}))}),[u,E]);var g=function(e){l(e),d(!0)};function h(e){var t={storeStatus:!s,storeId:u,companyId:E};p()({url:"/api/update-store-status/",method:"POST",data:t}).then((function(e){console.log("Store status has been updated"),l(t.storeStatus)})).catch((function(e){console.log("changeStoreStatus: Internal server error")}))}var b=function(e){return r.a.createElement("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(f.a,{type:"ThreeDots",color:e.color,height:"100",width:"100"}))};return r.a.createElement("div",null,r.a.createElement("main",null,r.a.createElement("h1",null,"Curbside Pickup Store #",e.storeId),r.a.createElement("p",null,"Real time updates as customers are outside your\xa0store."),r.a.createElement("div",null,m?r.a.createElement("div",null,s?r.a.createElement("div",null,r.a.createElement("button",{onClick:h,className:"btn-pause"},"Pause curbside app for this store")):r.a.createElement("div",null,r.a.createElement("button",{onClick:h,className:"btn-resume"},"Resume curbside app for this store"))):r.a.createElement("div",null,r.a.createElement(b,{color:"#dddddd"})))))},S=a(13),j=a(2),I=a(35),k=function(e){return r.a.createElement("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(f.a,{type:"ThreeDots",color:e.color,height:"100",width:"100"}))},C=function(e){return"denied"!==Notification.permission&&"granted"!==Notification.permission?r.a.createElement("div",null,r.a.createElement("h2",null,"Enable Browser Notifications for Current Queue"),r.a.createElement("p",null,"Click to allow browser notifications. These can be set in browser setttings as well."),r.a.createElement("button",{type:"button",className:"btn-start",onClick:e.changeNotificationStatus,"aria-label":"Enable Notifications"},"Enable Notifications")):r.a.createElement("div",null)},P=function(e){return e.pwResetEmailSentStatus?r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn-started","aria-label":"Reset Password"},"Reset email has been sent")):r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn-start","aria-label":"Reset Password",onClick:e.sendPWResetEMail},"Send Email"))},D=function(e){return e.usernameErrorMessage?r.a.createElement("ul",null,r.a.createElement("li",{className:"signin-error-message"},e.usernameErrorMessage," ")):r.a.createElement("div",null)},U=function(e){return e.usernameSuccessMessage?r.a.createElement("ul",null,r.a.createElement("li",{className:"signin-success-message"},e.usernameSuccessMessage," ")):r.a.createElement("div",null)},T=function(e){return e.username===e.currentUsername?r.a.createElement("button",{id:e.username,type:"button",className:"btn-started","aria-label":"Delete"},"Delete Profile"):r.a.createElement("button",{id:e.username,type:"button",className:"btn-pickedup","aria-label":"Delete",onClick:e.confirmDelete},"Delete Profile")},x=function(e){var t=function(t){var a=t.target.name,n=t.target.value;e.setNewUserData(Object(j.a)({},a,n))};return e.storeUsers.length>=5?r.a.createElement("div",{className:"help-container"},r.a.createElement("h2",null,"Add A Profile"),r.a.createElement("p",null,"You are currently at your 5 profile limit and not able to add more profiles at this time. To add another profile, you must remove a profile above.")):r.a.createElement("div",null,r.a.createElement("div",{className:"help-container"},r.a.createElement("h2",null,"Add A Profile (Limit 5)"),r.a.createElement("p",null,"A temprary password will be set and a password reset email will be sent to the email address you give below.")),r.a.createElement("div",{id:"addProfile"},r.a.createElement("form",{action:"",id:"updatePassword",className:"form-update"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"newUsername"},"Username"),r.a.createElement("input",{type:"text",id:"newUsername",name:"newUsername","aria-label":"Username",onChange:t})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"newUserFullName"},"Name"),r.a.createElement("input",{type:"name",id:"newUserFullName",name:"newUserFullName","aria-label":"Username",onChange:t})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"newUserEmail"},"Email"),r.a.createElement("input",{type:"email",id:"newUserEmail",name:"newUserEmail","aria-label":"Email",onChange:t})),r.a.createElement(D,{usernameErrorMessage:e.usernameErrorMessage}),r.a.createElement(U,{usernameSuccessMessage:e.usernameSuccessMessage}),r.a.createElement("button",{type:"button",className:"btn-start","aria-label":"Add A Profile",onClick:function(){var t={username:e.newUserData.newUsername,fullName:e.newUserData.newUserFullName,email:e.newUserData.newUserEmail,companyId:e.adminCompanyId,storeId:e.adminStoreId,userRoleType:"standard"};p()({url:"/api/add-store-user",method:"POST",data:t}).then((function(a){console.log("data:",JSON.stringify(a.data.message)),e.setUsernameSuccessMessage(a.data.message);var n=e.storeUsers;n.push(t),console.log("usernameSuccessMessage:",e.usernameSuccessMessage),e.setStoreUsers(Object(E.a)(n));var r={username:e.newUserData.newUsername};p()({url:"/api/reset-password-email",method:"POST",data:r}).then((function(e){console.log(e)})).catch((function(e){console.log("Send reset passsword email error: ",e)}))})).catch((function(t){console.log("Add new user error: Internal server error: ",t),e.setUsernameErrorMessage(t.response.data.message)}))}},"+ Profile"),r.a.createElement("button",{type:"reset",className:"btn-pickedup","aria-label":"Reset",onClick:function(){e.setUsernameErrorMessage(""),e.setUsernameSuccessMessage("")}},"Reset"))))},R=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)([]),i=Object(c.a)(o,2),m=i[0],d=i[1],u=Object(n.useState)(!1),g=Object(c.a)(u,2),f=g[0],h=g[1],b=Object(n.useState)(!1),v=Object(c.a)(b,2),w=v[0],N=v[1],y=Object(n.useState)(""),O=Object(c.a)(y,2),D=O[0],U=O[1],R=Object(n.useState)(""),L=Object(c.a)(R,2),M=L[0],A=L[1],_=Object(n.useReducer)((function(e,t){return Object(S.a)({},e,{},t)}),{newUsername:"",newUserFullName:"",newUserEmail:""}),F=Object(c.a)(_,2),J=F[0],q=F[1],B=e.fullName,V=e.storeId,Y=e.companyId,H=e.username,W=e.userRoleType;console.log("newUserData:",J),Object(n.useEffect)((function(){if(Y&&Y){var e={storeId:V,companyId:Y};p()({url:"/api/get-store-users",method:"POST",data:e}).then((function(e){console.log("data:",JSON.stringify(e.data.userData)),d(e.data.userData),h(!0)})).catch((function(e){console.log("getStoreStatus: Internal server error:",e),h(!0)}))}}),[V,Y]);var z=function(){Notification.requestPermission(),console.log("notification updates")},G=function(){N(!0);var e={username:H};p()({url:"/api/reset-password-email",method:"POST",data:e}).then((function(e){console.log(e),setTimeout((function(){N(!1)}),6e4)})).catch((function(e){console.log("Send reset passsword email error: ",e)}))},Q=function(e){var t=e.target.id;if(console.log("deleteUsername:",t),window.confirm("Confirm that you want to delete user: "+t)){var a={username:t};p()({url:"/api/delete-store-user",method:"POST",data:a}).then((function(e){console.log("data:",JSON.stringify(e.data.userData));console.log("deleteUserFindIndex");var a=m.findIndex((function(e){return e.username===t})),n=m;n.splice(a,1),console.log(n),d(Object(E.a)(n)),h(!0),console.log("storeUsers:",m)})).catch((function(e){console.log("getStoreStatus: Internal server error:",e),h(!0)}))}},$=function(e){var t={storeId:V,companyId:Y};p()({url:"/api/report-all-data",method:"POST",data:t}).then((function(e){console.log("data:",JSON.stringify(e.data.data)),l(e.data.data),document.getElementById("csvLinkButton").click()})).catch((function(e){console.log("changeStoreStatus: Internal server error")}))},K=function(e){return"superUser"===W?r.a.createElement("div",{id:"statusLevel02"},r.a.createElement("div",{className:"help-container"},r.a.createElement("h2",null,"Company Info:"),r.a.createElement("p",null,"See all companies using the app"),r.a.createElement("a",{href:""},r.a.createElement("button",{type:"button",className:"btn-start"},"Click to show")))):r.a.createElement("div",null)},X=function(e){return"superUser"===W||"admin"===W?r.a.createElement("div",{id:"statusLevel02"},r.a.createElement("div",null,r.a.createElement("h2",null,"Current Store Users"),r.a.createElement("p",{style:{padding:"0px 0px 15px 0px"}},"These are all the current users for your store:")),m.map((function(e,t){return r.a.createElement("div",{key:"user_"+t,className:"table-container-profile"},r.a.createElement("div",{className:"table-item-header-profile header-01-profile"},r.a.createElement("p",null,"Username")),r.a.createElement("div",{className:"table-item-header-profile header-02-profile"},r.a.createElement("p",null,"Full Name")),r.a.createElement("div",{className:"table-item-header-profile header-03-profile"},r.a.createElement("p",null,"Email Address")),r.a.createElement("div",{className:"table-item-header-profile header-04-profile"},r.a.createElement("p",null,"Password")),r.a.createElement("div",{className:"table-item-header-profile header-05-profile"},r.a.createElement("p",null,"\xa0")),r.a.createElement("div",{className:"table-item-profile table-item-01-profile"},r.a.createElement("p",null,e.username)),r.a.createElement("div",{className:"table-item-profile table-item-02-profile"},r.a.createElement("p",null,e.fullName)),r.a.createElement("div",{className:"table-item-profile table-item-03-profile"},r.a.createElement("p",null,e.email)),r.a.createElement("div",{className:"table-item-profile table-item-04-profile"},r.a.createElement("p",null,"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022")),r.a.createElement("div",{className:"table-item-profile table-item-05-profile"},r.a.createElement(T,{username:e.username,confirmDelete:Q,currentUsername:H})))})),r.a.createElement("div",{className:"help-container"},r.a.createElement(x,{adminStoreId:V,adminCompanyId:Y,setUsernameErrorMessage:U,setUsernameSuccessMessage:A,newUserData:J,setNewUserData:q,usernameErrorMessage:D,usernameSuccessMessage:M,storeUsers:m,setStoreUsers:d}))):r.a.createElement("div",null)},Z=function(e){var t;return"standard"===W||"superUser"===W||"admin"===W?r.a.createElement("div",{id:"statusLevel01"},r.a.createElement(C,{changeNotificationStatus:z}),r.a.createElement("div",null,r.a.createElement("h2",null,"Update Your Password"),r.a.createElement("p",null,"Send yourself a password reset email:"),r.a.createElement(P,{pwResetEmailSentStatus:w,sendPWResetEMail:G})),r.a.createElement("div",null,r.a.createElement("h2",null,"Download Historical Data"),r.a.createElement("p",{style:{padding:"0px 0px 15px 0px"}},"Historical pickup data from the last 7 days:"),r.a.createElement("button",{type:"button",className:"btn-start",onClick:$},"Download data"),r.a.createElement(I.CSVLink,(t={id:"csvLinkButton",filename:"my-file.csv",target:"_blank",data:s},Object(j.a)(t,"filename","historical_data.csv"),Object(j.a)(t,"className","btn-start"),Object(j.a)(t,"style",{display:"none"}),t))),r.a.createElement("div",{className:"help-container"},r.a.createElement("h2",null,"Need Help?"),r.a.createElement("p",null,"Use our help documenation:"),r.a.createElement("a",{href:""},r.a.createElement("button",{type:"button",className:"btn-start"},"Download help guide")))):r.a.createElement("div",null)};return W&&f?"superUser"===W||"admin"===W?r.a.createElement("div",null,r.a.createElement("div",{className:"admin-container"},r.a.createElement("div",{className:"admin-info"},r.a.createElement("h2",{className:"clerk-color txt-center"},B),r.a.createElement("h2",{className:"txt-center"},"User Role Level:",r.a.createElement("br",null),r.a.createElement("span",{className:"clerk-color"},W)),r.a.createElement(Z,null),r.a.createElement(X,null),r.a.createElement(K,null)))):r.a.createElement("div",null,"You do not have access rights for this page"):r.a.createElement("div",null,r.a.createElement("main",null,r.a.createElement(k,{color:"#dddddd"})))},L=function(e){return r.a.createElement("div",null)},M=a(16),A=a.n(M),_=Object(m.a)(),F=function(e){var t=Object(n.useReducer)((function(e,t){return Object(S.a)({},e,{},t)}),{loginUserName:"",loginUserPassword:"",loginErrorMessage:""}),a=Object(c.a)(t,2),s=a[0],l=a[1],o=function(e){var t=e.target.name,a=e.target.value;l(Object(j.a)({},t,a))},i=function(){return s.loginErrorMessage?r.a.createElement("ul",null,r.a.createElement("li",{className:"signin-error-message"},s.loginErrorMessage," ")):r.a.createElement("div",null)};return r.a.createElement("div",{id:"signin-body"},r.a.createElement("div",{id:"signin-container"},r.a.createElement("div",{id:"signin-app"},r.a.createElement("img",{src:A.a,alt:"shaw scott Logo",className:"signin-logo"}),r.a.createElement("form",{method:"POST",action:"",className:"signin-form",onSubmit:function(e){e.preventDefault(),setTimeout((function(){var e={username:s.loginUserName,password:s.loginUserPassword};p()({url:"/api/account/signin",method:"POST",data:e}).then((function(e){console.log(JSON.stringify(e)),console.log("username",e.data.username),console.log("token",e.data.token),console.log("message",e.data.message),window.localStorage.setItem("jwt",e.data.token);var t=e.data.message;e.data.token?(_.push("/home"),_.go()):l(Object(j.a)({},"loginErrorMessage",t))})).catch((function(e){console.log("getStoreStatus: Internal server error")}))}),100)},id:"siginForm"},r.a.createElement("div",{className:"signin-form-container"},r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("input",{type:"text",name:"loginUserName",value:s.loginUserName,placeholder:"Username",onChange:o})),r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("input",{type:"password",name:"loginUserPassword",value:s.loginUserPassword,placeholder:"Password",onChange:o})),r.a.createElement("div",{className:"signin-item-1 signin-error-container"},r.a.createElement("p",{className:"signin-p"},r.a.createElement("a",{href:"/forgot-password",className:"signin-forgot"},"Forgot password?")),r.a.createElement(i,null)),r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("button",{type:"submit",className:"signin-button signin-btn",id:"next",value:"next"},"SIGN IN"))))),r.a.createElement("div",{className:"signin-footer"},r.a.createElement("p",{className:"signin-p"},"\xa92020 All rights reserved.",r.a.createElement("br",null),"Shaw / Scott"))))},J=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Sorry that page does not exist"))},q=function(e){return r.a.createElement("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(f.a,{type:"ThreeDots",color:e.color,height:"100",width:"100"}))},B=function(e){var t=e.resetPasswordData;return t.resetErrorMessage?r.a.createElement("ul",null,r.a.createElement("li",{"v-for":"error in errors",className:"signin-error-message"},t.resetErrorMessage," ")):r.a.createElement("div",null)},V=function(e){var t=e.resetPasswordData,a=e.setResetPasswordData,n=function(e){var t=e.target.name,n=e.target.value;a(Object(j.a)({},t,n)),a(Object(j.a)({},"inputFocus",t))};return t.tokenVerified&&!t.passwordUpdated?r.a.createElement("div",null,r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"signin-p"},"Enter new password below:")),r.a.createElement("div",{className:"signin-form-container"},r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("input",{key:"newPassword",className:"signin-input",type:"password",name:"newPassword",value:t.newPassword,placeholder:"New password",onChange:n})),r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("input",{key:"confirmNewPassword",className:"signin-input",type:"password",name:"confirmNewPassword",value:t.confirmNewPassword,placeholder:"Confirm new password",onChange:n})),r.a.createElement("div",{className:"signin-item-1 signin-error-container"},r.a.createElement(B,{resetPasswordData:t})),r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("button",{type:"submit",className:"signin-button signin-btn-resend",id:"next",value:"next"},"Save new password")))):t.tokenLoaded?t.passwordUpdated?r.a.createElement("div",null,r.a.createElement("div",{className:"text-container txt-center"},r.a.createElement("p",{className:"signin-p"},"Your password has been updated successfully.")),r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("a",{href:"/signin"},r.a.createElement("button",{type:"button",className:"signin-button signin-btn-resend"},"Back to signin page")))):r.a.createElement("div",null,r.a.createElement("div",{className:"text-container txt-center"},r.a.createElement("p",{className:"signin-p"},"Link is invalid or has expired. Please try again.")),r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("a",{href:"/signin"},r.a.createElement("button",{type:"button",className:"signin-button signin-btn-resend"},"Back to signin page")))):r.a.createElement("div",null,r.a.createElement(q,{color:"#dddddd"}))},Y=function(e){var t=Object(n.useReducer)((function(e,t){return Object(S.a)({},e,{},t)}),{newPassword:"",confirmNewPassword:"",resetErrorMessage:"",passwordResetToken:"",tokenVerified:!1,tokenLoaded:!1,passwordUpdated:!1}),a=Object(c.a)(t,2),s=a[0],l=a[1],o=new URLSearchParams(window.location.search);o.has("rt")&&!s.passwordResetToken&&l({passwordResetToken:o.get("rt")}),Object(n.useEffect)((function(){if(s.passwordResetToken){var e={token:s.passwordResetToken};p()({url:"/api/account/reset-auth",method:"POST",data:e}).then((function(e){e.data.success&&(l(Object(j.a)({},"tokenVerified",!0)),l(Object(j.a)({},"tokenLoaded",!0)))})).catch((function(e){l(Object(j.a)({},"tokenLoaded",!0))}))}}),[s.passwordResetToken]);return r.a.createElement("div",{id:"signin-body"},r.a.createElement("div",{id:"signin-container"},r.a.createElement("div",{id:"signin-app"},r.a.createElement("img",{src:A.a,alt:"shaw scott Logo",className:"signin-logo"}),r.a.createElement("form",{method:"POST",action:"",className:"signin-form",onSubmit:function(e){if(e.preventDefault(),s.confirmNewPassword&&s.newPassword)if(s.confirmNewPassword===s.newPassword){var t={token:s.passwordResetToken,newPassword:s.confirmNewPassword};p()({url:"/api/account/reset-password",method:"POST",data:t}).then((function(e){console.log("data:",JSON.stringify(e)),console.log("data end:");var t=e.data.message;e.data.success?(l(Object(j.a)({},"passwordUpdated",!0)),console.log("success: true")):l(Object(j.a)({},"resetErrorMessage",t))})).catch((function(e){console.log(e),e.message.includes("401")?l(Object(j.a)({},"tokenVerified",!1)):e.message.includes("500")?l(Object(j.a)({},"resetErrorMessage","Internal server error. Please try again.")):l(Object(j.a)({},"resetErrorMessage",e.response.data.message))}))}else l(Object(j.a)({},"resetErrorMessage","Passwords must match"));else l(Object(j.a)({},"resetErrorMessage","Passwords must not be empty"))}},r.a.createElement(V,{resetPasswordData:s,setResetPasswordData:l}))),r.a.createElement("div",{className:"signin-footer"},r.a.createElement("p",{className:"signin-p"},"\xa92020 All rights reserved.",r.a.createElement("br",null),"Shaw / Scott"))))},H=function(e){return r.a.createElement("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(f.a,{type:"ThreeDots",color:e.color,height:"100",width:"100"}))},W=function(e){var t=e.forgotPasswordData;return t.errorMessage?r.a.createElement("ul",null,r.a.createElement("li",{className:"signin-error-message"},t.errorMessage," ")):r.a.createElement("div",null)},z=function(e){var t=e.forgotPasswordData,a=e.setForgotPasswordData;return t.passwordEmailSent?r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"signin-p"},"A password reset email has been sent. Please check your inbox.")):t.resetEmailLoading?r.a.createElement("div",{id:"resetEmailLoading"},r.a.createElement(H,{color:"#dddddd"})):r.a.createElement("div",null,r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"signin-p"},"Enter your username below to send yourself a password reset email:")),r.a.createElement("div",{className:"signin-form-container"},r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("input",{key:"forgotPasswordEmailInput",id:"forgotPasswordEmailInput",className:"signin-input",type:"text",name:"username",value:t.username,placeholder:"Username",onChange:function(e){var t=e.target.name,n=e.target.value;a(Object(j.a)({},t,n))}})),r.a.createElement("div",{className:"signin-item-1 signin-error-container"},r.a.createElement(W,{forgotPasswordData:t})),r.a.createElement("div",{className:"signin-item-1"},r.a.createElement("button",{type:"submit",className:"signin-button signin-btn-resend",id:"next",value:"next"},"Send password reset email"))))},G=function(e){var t=Object(n.useReducer)((function(e,t){return Object(S.a)({},e,{},t)}),{username:"",errorMessage:"",passwordEmailSent:!1,resetEmailLoading:!1}),a=Object(c.a)(t,2),s=a[0],l=a[1];return r.a.createElement("div",{id:"signin-body"},r.a.createElement("div",{id:"signin-container"},r.a.createElement("div",{id:"signin-app"},r.a.createElement("img",{src:A.a,alt:"shaw scott Logo",className:"signin-logo"}),r.a.createElement("form",{method:"POST",action:"",className:"signin-form",onSubmit:function(e){e.preventDefault(),l(Object(j.a)({},"resetEmailLoading",!0));var t={username:s.username};p()({url:"/api/account/forgot-password",method:"POST",data:t}).then((function(e){console.log("data",JSON.stringify(e));e.data.message;e.data.success&&l(Object(j.a)({},"passwordEmailSent",!0)),l(Object(j.a)({},"resetEmailLoading",!1))})).catch((function(e){console.log("Error:",JSON.stringify(e.message)),e.message.includes("400")?l(Object(j.a)({},"errorMessage","Email address required")):e.message.includes("403")?l(Object(j.a)({},"errorMessage","Email address not on record")):l(Object(j.a)({},"errorMessage","Internal server error please try again")),l(Object(j.a)({},"resetEmailLoading",!1))}))}},r.a.createElement(z,{forgotPasswordData:s,setForgotPasswordData:l}))),r.a.createElement("div",{className:"signin-footer"},r.a.createElement("p",{className:"signin-p"},"\xa92020 All rights reserved.",r.a.createElement("br",null),"Shaw / Scott"))))},Q=Object(m.a)(),$=r.a.createContext({}),K=function(){return r.a.createElement("div",null)},X=function(e){var t=e.children,a=window.localStorage.jwt,s=Object(n.useState)(!1),l=Object(c.a)(s,2),o=l[0],i=l[1],m=Object(n.useState)(!0),d=Object(c.a)(m,2),u=d[0],E=d[1],g=Object(n.useState)(""),f=Object(c.a)(g,2),h=f[0],b=f[1],v=Object(n.useState)(""),w=Object(c.a)(v,2),N=w[0],y=w[1],O=Object(n.useState)(""),S=Object(c.a)(O,2),j=S[0],I=S[1],k=Object(n.useState)(""),C=Object(c.a)(k,2),P=C[0],D=C[1],U=Object(n.useState)(""),T=Object(c.a)(U,2),x=T[0],R=T[1];return Object(n.useEffect)((function(){p()({url:"api/account/auth",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",authorization:"Bearer ".concat(a)}}).then((function(e){i(!0),E(!1),b(e.data.storeId),y(e.data.companyId),I(e.data.fullName),D(e.data.username),R(e.data.userRoleType)})).catch((function(e){console.log("Token auth error:",e),i(!1),E(!1)}))}),[]),r.a.createElement($.Provider,{value:{isAuthenticated:o,isLoading:u,storeId:h,userRoleType:x,companyId:N,username:P,fullName:j}},t)},Z=function(e,t,a,s,l,c){var m=function(){document.getElementById("menu-open").checked=!1},u=function(){Q.push("/current-orders"),Q.go()},p=function(){Q.push("/completed-orders"),Q.go()},E=function(){localStorage.clear("jwt"),Q.push("/signin"),Q.go()},g=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"login",onClick:m},r.a.createElement(i.b,{onClick:E,to:"/logout",activeClassName:"active-nav"},"Logout"))),r.a.createElement("input",{type:"checkbox",className:"menu-open",id:"menu-open"}),r.a.createElement("label",{htmlFor:"menu-open",className:"icon-toggle"},r.a.createElement("div",{className:"spinner diagonal part-1"}),r.a.createElement("div",{className:"spinner horizontal"}),r.a.createElement("div",{className:"spinner diagonal part-2"})),r.a.createElement("div",{id:"menu",onClick:m},r.a.createElement("ul",{className:"sidebarMenuInner"},r.a.createElement("li",null,r.a.createElement(i.b,{to:"/home",activeClassName:"active-nav"},"Home")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/current-orders",activeClassName:"active-nav",onClick:u},"Current Orders")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/completed-orders",activeClassName:"active-nav",onClick:p},"Completed Orders")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/admin",activeClassName:"active-nav"},"Admin")))))};function f(e){var t=e.component,a=Object(o.a)(e,["component"]),s=Object(n.useContext)($),l=s.isAuthenticated,c=s.isLoading,i=s.storeId,m=s.userRoleType,u=s.companyId,p=s.username,E=s.fullName;return r.a.createElement(d.b,Object.assign({},a,{render:function(e){return c?r.a.createElement(K,null):l?r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(t,Object.assign({},e,{fullName:E,storeId:i,username:p,userRoleType:m,companyId:u}))):r.a.createElement(d.a,{push:!0,to:{pathname:"/signin",state:{from:e.location}}})}}))}return r.a.createElement(X,null,r.a.createElement(i.a,null,r.a.createElement(d.d,null,r.a.createElement(f,{exact:!0,path:"/",component:O,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}),r.a.createElement(f,{exact:!0,path:"/home",component:O,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}),r.a.createElement(f,{path:"/current-orders",component:v,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}),r.a.createElement(f,{exact:!0,path:"/completed-orders",component:y,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}),r.a.createElement(f,{exact:!0,path:"/admin",component:R,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}),r.a.createElement(f,{exact:!0,path:"/logout",component:L,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}),r.a.createElement(d.b,{exact:!0,path:"/signin",component:F,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}),r.a.createElement(d.b,{exact:!0,path:"/reset-password",component:Y,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}),r.a.createElement(d.b,{exact:!0,path:"/forgot-password",component:G,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}),r.a.createElement(f,{exact:!0,path:"*",component:J,fullName:c,storeId:e,companyId:l,userRoleType:s,username:a,isAuthenticated:t}))))},ee=function(e){return r.a.createElement("div",null,r.a.createElement(Z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.ce117d71.chunk.js.map